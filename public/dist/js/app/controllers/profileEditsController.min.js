app.controller("profileEditsController",["$scope","Upload","$timeout","$http","$window","config",(o,t,a,l,e,i)=>{function r(){function o(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return o()+o()+"-"+o()+"-"+o()+"-"+o()+"-"+o()+o()+o()}o.profilePhotoForm={},o.uploadAndSaveMongo=((t,a)=>{o.profilePhotoForm.files&&o.uploadFiles(t,a)}),o.uploading=!1,o.uploadFiles=((a,l)=>{if(o.uploading=!0,a){let e=l.split("."),n=e[e.length-1],p=r()+"."+n;t.upload({url:i.s3_upload_url,method:"POST",data:{key:p,acl:o.acl,policy:o.policy,"X-amz-signature":o.X_amz_signature,"X-amz-credential":o.x_amz_credential,"X-amz-algorithm":o.X_amz_algorithm,"X-amz-date":o.X_amz_date,"Content-Type":""!=a.type?a.type:"application/octet-stream",filename:p,file:t.dataUrltoBlob(a,p)}}).then(t=>{o.result=t.data,o.uploading=!1,console.log(t)},t=>{t.status>0&&(o.errorMsg=t.status+": "+t.data)},t=>{o.progress=Math.min(100,parseInt(100*t.loaded/t.total))})}}),o.triggerUploadWindow=(()=>{$('input[type="file"]').trigger("click")}),o.openUploadProfilePictureModal=(()=>{$("#uploadProfilePictureModal").modal("show")})}]);