app.controller("profileEditsController",["$scope","Upload","$timeout","$http","$window","config",(o,t,a,e,l,r)=>{function i(){function o(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return o()+o()+"-"+o()+"-"+o()+"-"+o()+"-"+o()+o()+o()}o.profilePhotoForm={},o.uploadAndSaveMongo=(t=>{o.profilePhotoForm.files&&o.profilePhotoForm.files.length>0&&o.uploadFiles(o.profilePhotoForm.files,t)}),o.uploading=!1,o.uploadFiles=((a,e)=>{o.uploading=!0,a&&a.length&&a.forEach(a=>{let e=a.name.split("."),l=e[e.length-1],n=i()+"."+l;a.upload=t.upload({url:r.s3_upload_url,method:"POST",data:{key:n,acl:o.acl,policy:o.policy,"X-amz-signature":o.X_amz_signature,"X-amz-credential":o.x_amz_credential,"X-amz-algorithm":o.X_amz_algorithm,"X-amz-date":o.X_amz_date,"Content-Type":""!=a.type?a.type:"application/octet-stream",filename:n,file:a}}),a.upload.then(t=>{o.result=t.data,o.uploading=!1},t=>{t.status>0&&(o.errorMsg=t.status+": "+t.data)},o=>{a.progress=Math.min(100,parseInt(100*o.loaded/o.total))})})}),o.triggerUploadWindow=(()=>{$('input[type="file"]').trigger("click")})}]);