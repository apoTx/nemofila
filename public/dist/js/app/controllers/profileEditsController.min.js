app.controller("profileEditsController",["$scope","Upload","$timeout","$http","$window","newAdFactory","countriesFactory","categoriesFactory","config","Slug",(t,a,e,o,l,r,n,i,d,p)=>{function u(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}t.newAdForm={},t.uploadAndSaveMongo=(a=>{t.newAdForm.files&&t.newAdForm.files.length>0&&t.uploadFiles(t.newAdForm.files,a)}),t.uploading=!1,t.uploadFiles=((e,o)=>{t.uploading=!0,e&&e.length&&e.forEach(e=>{let o=e.name.split("."),l=o[o.length-1],r=u()+"."+l;e.upload=a.upload({url:d.s3_upload_url,method:"POST",data:{key:r,acl:t.acl,policy:t.policy,"X-amz-signature":t.X_amz_signature,"X-amz-credential":t.x_amz_credential,"X-amz-algorithm":t.X_amz_algorithm,"X-amz-date":t.X_amz_date,"Content-Type":""!=e.type?e.type:"application/octet-stream",filename:r,file:e}}),e.upload.then(a=>{t.result=a.data,t.uploading=!1},a=>{a.status>0&&(t.errorMsg=a.status+": "+a.data)},t=>{e.progress=Math.min(100,parseInt(100*t.loaded/t.total))})})}),t.triggerUploadWindow=(()=>{$('input[type="file"]').trigger("click")})}]);