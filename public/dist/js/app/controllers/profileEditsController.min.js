app.controller("profileEditsController",["$scope","Upload","$timeout","$http","$window","config",(t,o,a,l,e,i)=>{function r(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}t.profilePhotoForm={},t.uploadAndSaveMongo=((o,a)=>{t.profilePhotoForm.files&&t.uploadFiles(o,a)}),t.uploading=!1,t.uploadFiles=((a,l)=>{if(t.uploading=!0,a){console.log(a),console.log(a.name);let e=l.split("."),n=e[e.length-1],p=r()+"."+n;o.upload({url:i.s3_upload_url,method:"POST",data:{key:p,acl:t.acl,policy:t.policy,"X-amz-signature":t.X_amz_signature,"X-amz-credential":t.x_amz_credential,"X-amz-algorithm":t.X_amz_algorithm,"X-amz-date":t.X_amz_date,"Content-Type":""!=a.type?a.type:"application/octet-stream",filename:p,file:o.dataUrltoBlob(a,p)}}).then(o=>{t.result=o.data,t.uploading=!1},o=>{o.status>0&&(t.errorMsg=o.status+": "+o.data)},t=>{a.progress=Math.min(100,parseInt(100*t.loaded/t.total))})}}),t.triggerUploadWindow=(()=>{$('input[type="file"]').trigger("click")})}]);