app.controller("profileEditsController",["$scope","Upload","$timeout","$http","$window","config",(t,a,o,e,l,i)=>{function r(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}t.profilePhotoForm={},t.uploadAndSaveMongo=((a,o)=>{t.profilePhotoForm.files&&t.uploadFiles(a,o)}),t.uploading=!1,t.uploadFiles=((o,e)=>{if(t.uploading=!0,o){let l=e.split("."),n=l[l.length-1],p=r()+"."+n;a.upload({url:i.s3_upload_url,method:"POST",data:{key:p,acl:t.acl,policy:t.policy,"X-amz-signature":t.X_amz_signature,"X-amz-credential":t.x_amz_credential,"X-amz-algorithm":t.X_amz_algorithm,"X-amz-date":t.X_amz_date,"Content-Type":""!=o.type?o.type:"application/octet-stream",filename:p,file:a.dataUrltoBlob(o,p)}}).then(a=>{t.result=a.data,t.uploading=!1},a=>{a.status>0&&(t.errorMsg=a.status+": "+a.data)},a=>{t.progress=Math.min(100,parseInt(100*a.loaded/a.total))})}}),t.triggerUploadWindow=(()=>{$('input[type="file"]').trigger("click")})}]);