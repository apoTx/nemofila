app.controller("buyPowerController",["$scope","buyPowerFactory","$window","$routeParams",function(e,o,r,t){if(t.id){let r=t.id;e.loadingAd=!0,o.getAd(r).then(o=>{console.log(o),e.loadingAd=!1,e.ad=o})}e.powerNumber="0",e.buyPowerLoader=!1,e.buyPowerStatus=!1,$(()=>{function r(r){e.buyPowerLoader=!0,e.$apply(),fetch("/charge",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.assign(r,{amount:parseInt(e.powerNumber)}))}).then(r=>{"OK"===r.statusText&&o.savePower(t.id,e.powerNumber).then(o=>{e.buyPowerLoader=!1,e.buyPowerStatus=!0})})}$("#buttonCheckout").on("click",()=>{e.powerNumber=e.powerNumber.split(":")[1],console.log(e.powerNumber),parseInt(e.powerNumber)>0&&checkoutHandler.open({name:"Easyad",description:"Power Purchase",token:r})}),$(".powerNumber").on("change",()=>{e.powerNumber=$(".powerNumber").val()})})}]);