app.controller("profileEditController",["$scope","Upload","$timeout","$http","$window","config","profileEditFactory",(o,t,a,l,e,r,i)=>{function n(){function o(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return o()+o()+"-"+o()+"-"+o()+"-"+o()+"-"+o()+o()+o()}o.profilePhotoForm={},o.uploadAndSaveMongo=((t,a)=>{o.profilePhotoForm.files&&o.uploadFiles(t,a)}),o.uploading=!1,o.uploadFiles=((a,l)=>{if(o.uploading=!0,a){let e=l.split("."),p=e[e.length-1],d=n()+"."+p;t.upload({url:r.s3_upload_url,method:"POST",data:{key:d,acl:o.acl,policy:o.policy,"X-amz-signature":o.X_amz_signature,"X-amz-credential":o.x_amz_credential,"X-amz-algorithm":o.X_amz_algorithm,"X-amz-date":o.X_amz_date,"Content-Type":""!=a.type?a.type:"application/octet-stream",filename:d,file:t.dataUrltoBlob(a,d)}}).then(t=>{o.result=t.data,o.uploading=!1,console.log(t),i.updatePhotoUrl(d).then(o=>{console.log(o)})},t=>{t.status>0&&(o.errorMsg=t.status+": "+t.data)},t=>{o.progress=Math.min(100,parseInt(100*t.loaded/t.total))})}}),o.triggerUploadWindow=(()=>{$('input[type="file"]').trigger("click")}),o.openUploadProfilePictureModal=(()=>{$("#uploadProfilePictureModal").modal("show")})}]);