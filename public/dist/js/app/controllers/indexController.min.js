app.controller("indexController",["$scope","$http","indexFactory","countriesFactory","categoriesFactory",(e,t,r,i,d)=>{e.toggleFilterSidebar=(()=>{$(".filterSidebar").sidebar("setting","transition","overlay").sidebar("toggle")}),e.newAdForm={},e.init=(()=>{e.indexAdsLoading=!0,e.advancedSearchVisible=!1,r.getIndexAds().then(t=>{e.indexAdsLoading=!1,e.ads=t}),i.getCountries().then(t=>{e.countries=t}),d.getCategories().then(t=>{e.categories=t})}),e.searchForm={},e.isSearch=!1,e.resultNumber=0,e.onSubmit=(t=>{e.indexAdsLoading=!0;let i={};try{i.countryId=e.countries[e.newAdForm.country]._id}catch(e){i.countryId=null}try{i.cityId=e.countries[e.newAdForm.country].cities[e.newAdForm.city]._id}catch(e){i.cityId=null}try{i.districtId=e.countries[e.newAdForm.country].cities[e.newAdForm.city].districts[e.newAdForm.district]._id}catch(e){i.districtId=null}let d={};try{d.categoryId=e.categories[e.newAdForm.category]._id}catch(e){d.categoryId=null}try{d.categoryChildId=e.categories[e.newAdForm.category].subCategories[e.newAdForm.categoryChild]._id}catch(e){d.categoryChildId=null}r.searchAd(e.searchForm.title,i,d).then(r=>{e.indexAdsLoading=!1,e.ads=r,e.isSearch=!0,e.resultNumber=r.length,t&&e.toggleFilterSidebar()})}),e.advancedSearch=(()=>{e.advancedSearchVisible?e.advancedSearchVisible=!1:e.advancedSearchVisible=!0})}]);