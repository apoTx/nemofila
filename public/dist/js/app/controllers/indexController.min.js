app.controller("indexController",["$scope","$http","indexFactory","categoriesFactory",(e,t,a,r)=>{e.containers=[{id:1,name:"Box1"},{id:2,name:"Box2"},{id:3,name:"Box3"}],e.select=function(t){e.visiblesCategories.subCategory=!1,e.categoryIndex=e.categories.findIndex(e=>e._id===t._id),console.log("index",e.categoryIndex),e.newAdForm.category=e.categoryIndex},e.visiblesCategories={subCategory:!0},e.changeCategory=(()=>{e.visiblesCategories.subCategory=!1}),$(()=>{setTimeout(()=>{$(".rating").rating({maxRating:5,interactive:!1})},400)}),e.toggleFilterSidebar=(()=>{$(".filterSidebar").sidebar("setting","transition","overlay").sidebar("toggle")}),e.newAdForm={},e.place=null,e.init=(t=>{$(".dropdown").dropdown(),e.indexAdsLoading=!0,e.indexEventsLoading=!0,e.advancedSearchVisible=!1,a.getIndexAds(t).then(t=>{e.indexAdsLoading=!1,e.ads=t.data,e.adPerPage=t.adPerPage,e.adCount=t.adCount,e.currentPage=t.page,e.dayName=t.dayName,e.currentTime=t.currentTime}),a.getIndexEvents().then(t=>{e.indexEventsLoading=!1,e.events=t}),r.getCategories().then(t=>{e.categories=t,console.log(e.categories)})}),e.searchForm={},e.isSearch=!1,e.resultNumber=0,e.onSubmit=(t=>{e.indexAdsLoading=!0;let r={};try{r.countryId=e.countries[e.newAdForm.country]._id}catch(e){r.countryId=null}try{r.cityId=e.countries[e.newAdForm.country].cities[e.newAdForm.city]._id}catch(e){r.cityId=null}try{r.districtId=e.countries[e.newAdForm.country].cities[e.newAdForm.city].districts[e.newAdForm.district]._id}catch(e){r.districtId=null}let d={};try{d.categoryId=e.categories[e.newAdForm.category]._id}catch(e){d.categoryId=null}try{d.categoryChildId=e.categories[e.newAdForm.category].subCategories[e.newAdForm.categoryChild]._id}catch(e){d.categoryChildId=null}a.searchAd(e.searchForm.title,r,d).then(a=>{e.indexAdsLoading=!1,e.ads=a.data,e.isSearch=!0,e.resultNumber=a.data.length,e.adPerPage=a.adPerPage,e.adCount=a.adCount,e.currentPage=a.page,t&&e.toggleFilterSidebar()})}),e.advancedSearch=(()=>{e.advancedSearchVisible?e.advancedSearchVisible=!1:e.advancedSearchVisible=!0}),e.openHowItWorkModal=(()=>{$("#howItWorkModal").modal("show")})}]);