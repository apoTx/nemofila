app.controller("indexController",["$scope","$http","indexFactory","countriesFactory","categoriesFactory",(e,t,d,r,c)=>{e.newAdForm={},e.init=(()=>{e.indexAdsLoading=!0,e.advancedSearchVisible=!1,d.getIndexAds().then(t=>{e.indexAdsLoading=!1,e.ads=t}),r.getCountries().then(t=>{e.countries=t}),c.getCategories().then(t=>{e.categories=t})}),e.searchForm={},e.onSubmit=(()=>{e.indexAdsLoading=!0;let t={};try{t.countryId=e.countries[e.newAdForm.country]._id}catch(e){t.countryId=null}try{t.cityId=e.countries[e.newAdForm.country].cities[e.newAdForm.city]._id}catch(e){t.cityId=null}try{t.districtId=e.countries[e.newAdForm.country].cities[e.newAdForm.city].districts[e.newAdForm.district]._id}catch(e){t.districtId=null}let r={};try{r.categoryId=e.categories[e.newAdForm.category]._id}catch(e){r.categoryId=null}try{r.categoryChildId=e.categories[e.newAdForm.category].subCategories[e.newAdForm.categoryChild]._id}catch(e){r.categoryChildId=null}d.searchAd(e.searchForm.title,t,r).then(t=>{e.indexAdsLoading=!1,e.ads=t})}),e.advancedSearch=(()=>{e.advancedSearchVisible?e.advancedSearchVisible=!1:e.advancedSearchVisible=!0})}]);