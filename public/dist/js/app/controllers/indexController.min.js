app.controller("indexController",["$scope","$http","indexFactory","countriesFactory","categoriesFactory",(t,e,i,c,r)=>{t.newAdForm={},t.init=(()=>{t.indexAdsLoading=!0,t.advancedSearchVisible=!1,i.getIndexAds().then(e=>{t.indexAdsLoading=!1,t.ads=e}),c.getCountries().then(e=>{t.countries=e,console.log(t.countries)}),r.getCategories().then(e=>{t.categories=e})}),t.searchForm={},t.onSubmit=(()=>{t.indexAdsLoading=!0;let e={};try{e.country=t.countries[t.newAdForm.country]._id}catch(t){e.country=-1}try{e.city=t.countries[t.newAdForm.country].cities[t.newAdForm.city]._id}catch(t){e.city=-1}try{e.district=t.countries[t.newAdForm.country].cities[t.newAdForm.city].districts[t.newAdForm.district]._id}catch(t){e.district=-1}i.searchAd(t.searchForm.title,e).then(e=>{t.indexAdsLoading=!1,t.ads=e})}),t.advancedSearch=(()=>{t.advancedSearchVisible=!0})}]);