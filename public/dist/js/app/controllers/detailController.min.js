app.controller("detailController",["$scope","favFactory","rateFactory","messageFactory",(e,s,a,o)=>{function n(e,s){new google.maps.Geocoder;const a={zoom:8,center:new google.maps.LatLng(e,s)};new google.maps.Map(document.getElementById("googleMap"),a)}$(()=>{$(".detail-right-menu a").popup({position:"bottom center"}),e.onRate=!1,$("#detailRating").rating({maxRating:5,onRate:s=>{if(!e.userId||"null"===e.userId)return alert("Please login"),!1;a.setRate(e.adId,s).then(e=>{console.log(e)}),e.onRate=!0}}),$("#sendMessageForm").form({keyboardShortcuts:!1,on:"blur",fields:{pw:{identifier:"message",rules:[{type:"empty",prompt:"Please enter your message."},{type:"maxLength[600]",prompt:"Your message can be up to {ruleValue} characters long."}]}},onSuccess:()=>{e.sendMessage()},onInvalid:()=>{e.sendMessageErr=null}})}),e.init=((a,o,t,r,d,i)=>{e.adId=o,e.userId=a,n(d,i),"null"!==a&&s.isFav(a,o).then(s=>{e.isFav=s.isFav});let l=JSON.parse(t);l.forEach((e,s)=>{e.url=r+"/"+e.filename,e.id=s}),e.imagesa=l}),e.addFavourites=((a,o)=>{s.addFavourites(a,o).then(s=>{s.status&&(e.isFav=!0)})}),e.delFavourites=((a,o)=>{s.delFavourites(a,o).then(s=>{s.status&&(e.isFav=!1)})}),$(()=>{$("#sendMessageModal").modal({onHide:function(){e.messageSended=!1,e.sendMessageFormData.message="",$("body").removeClass("ios11-input-bug-fixer")},onShow:()=>{$("body").addClass("ios11-input-bug-fixer")}})}),e.openSendMessageModal=(()=>{$("#sendMessageModal").modal("show")}),e.sendMessage=(()=>{e.sendMessageLoading=!0,o.createConversation(e.sendMessageFormData).then(s=>{if(1!==s.status)return e.sendMessageLoading=!1,e.sendMessageErr=s.error,!1;o.createMessage(e.sendMessageFormData,s.conversationId).then(s=>{if(e.sendMessageLoading=!1,1!==s.status)return e.sendMessageErr=s.error,!1;e.messageSended=!0})})}),e.methods={},e.openGallery=function(){e.methods.open()},e.changePhoto=(s=>{e.showcase=e.photos[s].filename}),e.showcase=((s,a)=>{console.log(s),console.log(a),e.photos=s,e.showcaseIndex=a,e.showcase=s[e.showcaseIndex].filename})}]),app.config(["ngImageGalleryOptsProvider",function(e){e.setOpts({thumbnails:!0,thumbSize:40,inline:!1,bubbles:!0,bubbleSize:20,imgBubbles:!1,bgClose:!0,piracy:!1,imgAnim:"fadeup"})}]);