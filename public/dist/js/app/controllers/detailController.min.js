app.controller("detailController",["$scope","detailFactory","messageFactory",(e,s,a)=>{e.images=[{id:1,title:"This is <b>amazing photo</b> of <i>nature</i>",alt:"amazing nature photo",thumbUrl:"https://pixabay.com/static/uploads/photo/2016/06/13/07/32/cactus-1453793__340.jpg",url:"https://pixabay.com/static/uploads/photo/2016/06/13/07/32/cactus-1453793_960_720.jpg",extUrl:"http://mywebsitecpm/photo/1453793"},{id:2,url:"https://pixabay.com/static/uploads/photo/2016/06/10/22/25/ortler-1449018_960_720.jpg",deletable:!0},{id:3,thumbUrl:"https://pixabay.com/static/uploads/photo/2016/04/11/18/53/aviator-1322701__340.jpg",url:"https://pixabay.com/static/uploads/photo/2016/04/11/18/53/aviator-1322701_960_720.jpg"}],$(".detail-right-menu a").popup({position:"bottom center"}),$("#sendMessageForm").form({on:"blur",fields:{pw:{identifier:"message",rules:[{type:"empty",prompt:"Please enter your message."},{type:"maxLength[600]",prompt:"Your message can be up to {ruleValue} characters long."}]}},onSuccess:()=>{e.sendMessage()},onInvalid:()=>{e.sendMessageErr=null}}),e.init=((a,t,o,i)=>{null!==a&&s.isFav(a,t).then(s=>{e.isFav=s.isFav});let r=JSON.parse(o);r.forEach((e,s)=>{e.url="http://localhost:3000/uploads/"+i+"/"+e.filename,e.id=s}),e.imagesa=r,console.log(e.imagesa)}),e.addFavourites=((a,t)=>{console.log(a),console.log(t),s.addFavourites(a,t).then(s=>{s.status&&(e.isFav=!0)})}),e.delFavourites=((a,t)=>{console.log(a),console.log(t),s.delFavourites(a,t).then(s=>{s.status&&(e.isFav=!1)})}),e.openSendMessageModal=(()=>{$("#sendMessageModal").modal("show")}),e.sendMessage=(()=>{e.sendMessageLoading=!0,a.createConversation(e.sendMessageFormData).then(s=>{if(1!==s.status)return e.sendMessageLoading=!1,e.sendMessageErr=s.error,!1;a.createMessage(e.sendMessageFormData,s.conversationId).then(s=>{if(e.sendMessageLoading=!1,1!==s.status)return e.sendMessageErr=s.error,!1;e.messageSended=!0})})})}]),app.config(["ngImageGalleryOptsProvider",function(e){e.setOpts({thumbnails:!0,thumbSize:30,inline:!1,bubbles:!0,bubbleSize:20,imgBubbles:!1,bgClose:!1,piracy:!1,imgAnim:"fadeup"})}]);