app.controller("detailController",["$scope","detailFactory","messageFactory",(e,s,a)=>{$(".detail-right-menu a").popup({position:"bottom center"}),$("#sendMessageForm").form({on:"blur",fields:{pw:{identifier:"message",rules:[{type:"empty",prompt:"Please enter your message."},{type:"maxLength[600]",prompt:"Your message can be up to {ruleValue} characters long."}]}},onSuccess:()=>{e.sendMessage()},onInvalid:()=>{e.sendMessageErr=null}}),e.init=((a,o)=>{null!==a&&s.isFav(a,o).then(s=>{e.isFav=s.isFav})}),e.addFavourites=((a,o)=>{console.log(a),console.log(o),s.addFavourites(a,o).then(s=>{s.status&&(e.isFav=!0)})}),e.delFavourites=((a,o)=>{console.log(a),console.log(o),s.delFavourites(a,o).then(s=>{s.status&&(e.isFav=!1)})}),e.openSendMessageModal=(()=>{$("#sendMessageModal").modal("show")}),setTimeout(()=>{e.openSendMessageModal()}),e.sendMessage=(()=>{e.sendMessageLoading=!0,a.createConversation(e.sendMessageFormData).then(s=>{if(1!==s.status)return e.sendMessageLoading=!1,e.sendMessageErr=s.error,!1;a.createMessage(e.sendMessageFormData,s.conversationId).then(s=>{if(e.sendMessageLoading=!1,1!==s.status)return e.sendMessageErr=s.error,!1;e.messageSended=!0})})})}]);