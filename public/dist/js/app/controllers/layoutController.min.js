app.controller("layoutController",["$scope","$rootScope","$http","$window","layoutFactory","messageFactory",(e,s,o,r,a,i)=>{e.toggleSidebar=(()=>{$(".rightSidebar").sidebar("setting","transition","overlay").sidebar("toggle")}),$("#signUpForm").form({keyboardShortcuts:!1,on:"blur",fields:{name:{identifier:"name",rules:[{type:"empty",prompt:"Please enter a name"}]},surname:{identifier:"surname",rules:[{type:"empty",prompt:"Please enter a surname"}]},email:{identifier:"email",rules:[{type:"email",prompt:"Please enter a valid e-mail"}]},number:{identifier:"number",rules:[{type:"number",prompt:"Please enter a valid number"}]},password:{identifier:"password",rules:[{type:"empty",prompt:"Please enter a valid password"}]},passwordConfirm:{identifier:"passwordConfirm",rules:[{type:"match[password]",prompt:"Mismatched Password"}]}},onSuccess:()=>{e.signUp()}}),$("#signInForm").form({keyboardShortcuts:!1,on:"blur",fields:{email:{identifier:"email",rules:[{type:"email",prompt:"Please enter a valid e-mail"}]},pw:{identifier:"pw",rules:[{type:"empty",prompt:"Please enter a password"}]}},onSuccess:()=>{e.signIn()},onInvalid:()=>{e.signInErr=null}}),$("#forgotForm").form({keyboardShortcuts:!1,on:"blur",closable:!1,fields:{name:{identifier:"email",rules:[{type:"email",prompt:"Please enter a valid e-mail"}]}},onSuccess:()=>{e.forgotPassword()}}),$("#subscribeForm").form({keyboardShortcuts:!1,on:"blur",closable:!1,fields:{name:{identifier:"email",rules:[{type:"email",prompt:"Please enter a valid e-mail"}]}},onSuccess:()=>{e.subscribe()}}),$(()=>{$("#signInModal,#signUpModal, #forgotModal").modal({onShow:()=>{$("body").addClass("ios11-input-bug-fixer")},onHide:()=>{$("body").removeClass("ios11-input-bug-fixer")}})}),e.openSignUpModal=(e=>{e&&$("#signInModal").modal("show"),$("#signUpModal").modal("show")}),e.openSignInModal=(e=>{e&&$("#signUpModal").modal("show"),$("#signInModal").modal("show")}),e.openForgotModal=(e=>{e&&$("#signInModal").modal("show"),$("#forgotModal").modal({closable:!1}).modal("show")}),e.openSubscribeModal=(()=>{$("#subscribeModal").modal("show")}),setTimeout(()=>{}),e.signupForm={},e.signUp=(()=>{e.registerBtnLoading=!0,a.signUp(e.signupForm,e.signUpRecaptchaResponse).then(s=>{1===s.status?a.signIn({email:e.signupForm.email},!0).then(s=>{e.registerBtnLoading=!1,1===s.status&&r.location.reload()}):(11e3===s.code?e.signUpErr="This email address is already in use.":e.signUpErr="There was an unexpected problem.",e.registerBtnLoading=!1)})}),e.loginFormData={},e.signIn=(()=>{e.signInBtnLoading=!0,a.signIn(e.loginFormData,!1,e.signInRecaptchaResponse).then(s=>{e.signInBtnLoading=!1,1===s.status?r.location.reload():e.signInErr=s.error})}),e.forgotFormData={},e.forgotPassword=(()=>{e.forgotBtnLoading=!0,e.emailSended=!1,a.forgotPassword(e.forgotFormData.email).then(s=>{e.forgotBtnLoading=!1,console.log(s),1===s.status?e.emailSended=!0:e.forgotErr=s.error})}),e.subscribeFormData={},e.subscribe=(()=>{e.subscribeBtnLoading=!0,e.successSubscribe=!1,a.subscribe(e.subscribeFormData.email).then(s=>{e.subscribeBtnLoading=!1,console.log(s),1===s.status?(e.successSubscribe=!0,e.subscribeErr=null):e.subscribeErr=s.error})}),e.init=(e=>{try{JSON.parse(e)&&i.getUnreadMessages().then(e=>{s.messageLength=e.length})}catch(e){}}),e.activeRegisterBtn=!1,e.successSignUpCaptcha=(s=>{e.activeRegisterBtn=!0,e.signUpRecaptchaResponse=s}),e.activeLoginBtn=!1,e.successSignInCaptcha=(s=>{e.signInRecaptchaResponse=s,e.activeLoginBtn=!0})}]);