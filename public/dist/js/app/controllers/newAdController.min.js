app.controller("newAdController",["$scope","Upload","$timeout","$http",(e,t,o,a)=>{e.newAdForm={},e.steps={},e.steps.informations=!0,e.steps.preview=!1,$("#newAdForm").form(),e.anotherContact={},$(".ui.checkbox").checkbox({onChecked:()=>{e.anotherContact.checked=!0,setTimeout(()=>{$('input[name="anotherContactName"]').focus()},20)},onUnchecked:()=>{e.anotherContact.checked=!1},onChange:()=>{e.$apply()}}),e.newAdForm.uploadedFiles={},e.uploadFiles=function(a,n){a&&a.length&&t.upload({url:"newAd/uploadPhotos",method:"POST",data:{files:e.newAdForm.files,uuid:n}}).then(t=>{o(()=>{e.result=t.data,1==t.data.status&&(e.steps.informations=!1,e.steps.preview=!0)})},t=>{t.status>0&&(e.errorMsg=t.status+": "+t.data)},t=>{e.progress=Math.min(100,parseInt(100*t.loaded/t.total))})},e.saveAd=(()=>{e.newAdBtnLoading=!0,a({url:"/newAd/saveAdBuffer",method:"POST",data:{data:e.newAdForm}}).then(t=>{e.newAdBtnLoading=!1,console.log(t),1==t.data.status&&e.uploadFiles(e.newAdForm.files,t.data.uuid)},()=>{console.log("fail")})})}]);