app.controller("categoryController",["$scope","$http",(e,t)=>{e.categories={selected:{index:0,_id:0},form:{category:{name:""},subCategory:{name:""}},list:[]},e.city={selected:{index:0,_id:0}},e.visibles={subCategory:!1},e.init=(()=>{t({url:path+"/categories/getCategories",method:"GET"}).then(t=>{console.log(t),e.categories.list=t.data},()=>{console.log("fail")})}),e.selectCategory=(t=>{e.visibles.subCategory=!0,e.categories.selected.index=t,e.categories.selected._id=e.categories.list[t]._id}),e.saveCategory=(()=>{""!==e.categories.form.category.name&&t({url:path+"/categories/saveCategory",method:"POST",data:{name:e.categories.form.category.name}}).then(t=>{console.log(t),1===t.data.status&&(e.categories.list.push({name:t.data.name,_id:t.data._id}),e.categories.form.category.name="")},()=>{console.log("fail")})}),e.saveSubCategory=(()=>{""!==e.categories.form.subCategory.name&&t({url:path+"/categories/saveSubCategory",method:"POST",data:{name:e.categories.form.subCategory.name,countryId:e.categories.selected._id}}).then(t=>{if(console.log(t),1===t.data.status){try{e.categories.list[e.categories.selected.index].subCategories.push({name:t.data.name,_id:t.data._id})}catch(a){e.categories.list[e.categories.selected.index].subCategories=[],e.categories.list[e.categories.selected.index].subCategories.push({name:t.data.name,_id:t.data._id})}e.categories.form.city.name=""}},()=>{console.log("fail")})}),e.deleteCountry=(a=>{window.confirm("Are you sure ?")&&t({url:path+"/categories/deleteCountry",method:"DELETE",data:{_id:e.categories.list[a]._id},headers:{"Content-type":"application/json;charset=utf-8"}}).then(t=>{1===t.data.status&&e.categories.list.splice(a,1)},()=>{console.log("fail")})}),e.deleteCity=(a=>{window.confirm("Are you sure ?")&&t({url:path+"/categories/deleteCity",method:"DELETE",data:{_id:e.categories.list[e.categories.selected.index].cities[a]._id,countryId:e.categories.selected._id},headers:{"Content-type":"application/json;charset=utf-8"}}).then(t=>{1===t.data.status&&e.categories.list[e.categories.selected.index].cities.splice(a,1)},()=>{console.log("fail")})})}]);