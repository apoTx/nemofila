app.controller("generalController",["$scope","$http","Upload","config","$timeout","generalFactory",(a,e,t,l,o,r)=>{a.headerImage=l.s3_photo_base+"/"+l.s3_bucket+"/header.jpg",a.getUploadCredentials=((e,t)=>{r.get_s3_signature().then(l=>{a.uploadFiles(e,t,l.inputs)})}),a.uploading=!1,a.uploadFiles=function(e,r,p){a.f=e,a.errFile=r&&r[0],e&&(e.upload=t.upload({url:l.s3_upload_url,method:"POST",data:{key:"header.jpg",acl:p.acl,policy:p.policy,"X-amz-signature":p.X_amz_signature,"X-amz-credential":p.x_amz_credential,"X-amz-algorithm":p.X_amz_algorithm,"X-amz-date":p.X_amz_date,"Content-Type":""!=e.type?e.type:"application/octet-stream",filename:"header.jpg",file:e}}),e.upload.then(a=>{o(()=>{e.result=a.data})},e=>{e.status>0&&(a.errorMsg=e.status+": "+e.data)},a=>{e.progress=Math.min(100,parseInt(100*a.loaded/a.total))}))}}]);