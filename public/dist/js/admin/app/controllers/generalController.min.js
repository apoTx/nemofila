app.controller("generalController",["$scope","Upload","config","$timeout","generalFactory",(a,e,t,l,o)=>{a.getUploadCredentials=((e,t)=>{o.get_s3_signature().then(l=>{a.uploadFiles(e,t,l.inputs)})}),a.uploading=!1,a.uploadFiles=function(o,r,p){a.f=o,a.errFile=r&&r[0],o&&(o.upload=e.upload({url:t.s3_upload_url,method:"POST",data:{key:"header.jpg",acl:p.acl,policy:p.policy,"X-amz-signature":p.X_amz_signature,"X-amz-credential":p.x_amz_credential,"X-amz-algorithm":p.X_amz_algorithm,"X-amz-date":p.X_amz_date,"Content-Type":""!=o.type?o.type:"application/octet-stream",filename:"header.jpg",file:o}}),o.upload.then(a=>{l(()=>{o.result=a.data})},e=>{e.status>0&&(a.errorMsg=e.status+": "+e.data)},a=>{o.progress=Math.min(100,parseInt(100*a.loaded/a.total))}))}}]);