app.controller("countryController",["$scope","$http",(e,t)=>{e.countries={selected:{index:0,_id:0},form:{country:{name:""},city:{name:""},district:{name:""}},list:[]},e.init=(()=>{t({url:path+"/countries/getCountries",method:"GET"}).then(t=>{console.log(t),e.countries.list=t.data},()=>{console.log("fail")})}),e.removeCountry=(o=>{window.confirm("Are you sure ?")&&t({url:path+"/countries/deleteCountry",method:"DELETE",data:{_id:e.countries.list[o]._id},headers:{"Content-type":"application/json;charset=utf-8"}}).then(t=>{1===t.data.status&&e.countries.list.splice(o,1)},()=>{console.log("fail")})}),e.selectCountry=(t=>{e.countries.selected.index=t,e.countries.selected._id=e.countries.list[t]._id}),e.saveCountry=(()=>{""!==e.countries.form.country.name&&t({url:path+"/countries/saveCountry",method:"POST",data:{name:e.countries.form.country.name}}).then(t=>{console.log(t),1===t.data.status&&(e.countries.list.push({name:t.data.name,_id:t.data._id}),e.countries.form.country.name="")},()=>{console.log("fail")})}),e.saveCity=(()=>{console.log(e.countries.selected._id),""!==e.countries.form.city.name&&t({url:path+"/countries/saveCity",method:"POST",data:{name:e.countries.form.city.name,countryId:e.countries.selected._id}}).then(t=>{console.log(t),1===t.data.status&&(e.countries.list[e.countries.selected.index].cities.push({name:t.data.name,_id:t.data._id}),e.countries.form.city.name="")},()=>{console.log("fail")})})}]);