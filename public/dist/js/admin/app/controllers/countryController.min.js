app.controller("countryController",["$scope","$http",(e,t)=>{e.countries={selected:{index:0,_id:0},form:{country:{name:""},city:{name:""},district:{name:""}},list:[]},e.city={selected:{index:0,_id:0}},e.visibles={cities:!1,district:!1},e.init=(()=>{t({url:path+"/countries/getCountries",method:"GET"}).then(t=>{console.log(t),e.countries.list=t.data},()=>{console.log("fail")})}),e.selectCountry=(t=>{e.visibles.cities=!0,e.countries.selected.index=t,e.countries.selected._id=e.countries.list[t]._id}),e.selectCity=(t=>{e.visibles.districts=!0,e.city.selected.index=t,e.city.selected._id=e.countries.list[e.countries.selected.index].cities[t]._id}),e.saveCountry=(()=>{""!==e.countries.form.country.name&&t({url:path+"/countries/saveCountry",method:"POST",data:{name:e.countries.form.country.name}}).then(t=>{console.log(t),1===t.data.status&&(e.countries.list.push({name:t.data.name,_id:t.data._id}),e.countries.form.country.name="")},()=>{console.log("fail")})}),e.saveCity=(()=>{""!==e.countries.form.city.name&&t({url:path+"/countries/saveCity",method:"POST",data:{name:e.countries.form.city.name,countryId:e.countries.selected._id}}).then(t=>{if(console.log(t),1===t.data.status){try{e.countries.list[e.countries.selected.index].cities.push({name:t.data.name,_id:t.data._id})}catch(i){e.countries.list[e.countries.selected.index].cities=[],e.countries.list[e.countries.selected.index].cities.push({name:t.data.name,_id:t.data._id})}e.countries.form.city.name=""}},()=>{console.log("fail")})}),e.saveDistrict=(()=>{""!==e.countries.form.district.name&&t({url:path+"/countries/saveDistrict",method:"POST",data:{name:e.countries.form.district.name,countryId:e.countries.selected._id,cityId:e.city.selected._id,cityIndex:e.city.selected.index}}).then(t=>{if(console.log(t),1===t.data.status){try{e.countries.list[e.countries.selected.index].cities[e.city.selected.index].districts.push({name:t.data.name,_id:t.data._id})}catch(i){e.countries.list[e.countries.selected.index].cities[e.city.selected.index].districts=[],e.countries.list[e.countries.selected.index].cities[e.city.selected.index].districts.push({name:t.data.name,_id:t.data._id})}e.countries.form.district.name=""}},()=>{console.log("fail")})}),e.deleteCountry=(i=>{window.confirm("Are you sure ?")&&t({url:path+"/countries/deleteCountry",method:"DELETE",data:{_id:e.countries.list[i]._id},headers:{"Content-type":"application/json;charset=utf-8"}}).then(t=>{1===t.data.status&&e.countries.list.splice(i,1)},()=>{console.log("fail")})}),e.deleteCity=(i=>{window.confirm("Are you sure ?")&&t({url:path+"/countries/deleteCity",method:"DELETE",data:{_id:e.countries.list[e.countries.selected.index].cities[i]._id,countryId:e.countries.selected._id},headers:{"Content-type":"application/json;charset=utf-8"}}).then(t=>{1===t.data.status&&e.countries.list[e.countries.selected.index].cities.splice(i,1)},()=>{console.log("fail")})})}]);