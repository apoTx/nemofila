app.controller("eventsController",["$scope","$http","eventsFactory","$window",(e,t,n,a)=>{e.loadingAds=!0,n.getAllEvents().then(t=>{e.loadingAds=!1,e.events=t}),e.eventEditForm={},e.eventEditForm.publishStatus="1",e.eventEditForm.reasonVisible=!1,e.changeStatus=(()=>{"2"===e.eventEditForm.publishStatus?e.eventEditForm.reasonVisible=!0:e.eventEditForm.reasonVisible=!1}),e.submitEdit=(()=>{e.loadingEditSubmit=!0,n.publish(e.eventEditForm).then(t=>{e.loadingEditSubmit=!1,1===t.status&&a.location.reload()})}),e.unpublish=(()=>{!0===confirm("Are you sure?")&&(e.loadingUnpublish=!0,n.unpublish(e.eventEditForm.id).then(t=>{e.loadingUnpublish=!1,1===t.status&&a.location.reload()}))}),$(()=>{$("#startDate").calendar({type:"date",formatter:{date:function(e){if(!e)return"";let t=e.getDate()+"";t.length<2&&(t="0"+t);let n=e.getMonth()+1+"";return n.length<2&&(n="0"+n),e.getFullYear()+"-"+n+"-"+t}},onChange:t=>{e.searchForm.startDate=t}}),$("#endDate").calendar({type:"date",formatter:{date:function(e){if(!e)return"";let t=e.getDate()+"";t.length<2&&(t="0"+t);let n=e.getMonth()+1+"";return n.length<2&&(n="0"+n),e.getFullYear()+"-"+n+"-"+t}},onChange:t=>{e.searchForm.endDate=t}})}),e.searchForm={},e.advanceSearch=(()=>{e.loadingAds=!0,n.advanceSearch(e.searchForm).then(t=>{e.loadingAds=!1,e.ads=t})})}]);